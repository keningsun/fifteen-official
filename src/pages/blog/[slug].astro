---
import WebflowLayout from '../../layouts/WebflowLayout.astro';
import headHtml from '../../content/webflow/heads/blog.html?raw';
import { blogPosts, fallbackPost, blogArchiveSlugs } from '../../data/blogPosts';

const { slug } = Astro.params;
const post = blogPosts.find((item) => item.slug === slug) ?? fallbackPost;
export function getStaticPaths() {
  return blogArchiveSlugs.map((entry) => ({ params: { slug: entry } }));
}
---
<WebflowLayout headHtml={headHtml} mainTag="div">
  <section class="section_blog-post">
    <div class="grid-cell-top-first">
      <div class="padding-left-grid"></div>
      <div class="middle-grid">
        <div class="padding-section-large">
          <div class="max-width-custom1 align-center">
            <div class="margin-bottom margin-xxlarge">
              <h1 class="heading-style-h2">
                {post.title}
              </h1>
              <div class="margin-top margin-medium">
                <div class="blog_item-content-top">
                  <div class="blog-date">
                    <div class="text-size-small text-weight-normal text-color-secondary">
                      {post.date}
                    </div>
                  </div>
                  <div class="blog-read-time text-color-secondary">
                    <div class="blog_icon-wrapper">
                      <div class="icon-embed-xxsmall w-embed">
                        <svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 9.34784 20.9464 6.8043 19.0711 4.92893C17.1957 3.05357 14.6522 2 12 2ZM12 20C7.58172 20 4 16.4183 4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12C20 14.1217 19.1571 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20ZM12.88 6.5V11.64L16.51 15.27C16.7018 15.4678 16.7018 15.7822 16.51 15.98L15.98 16.51C15.7822 16.7018 15.4678 16.7018 15.27 16.51L11.27 12.51C11.1784 12.4159 11.1249 12.2912 11.12 12.16V6.5C11.12 6.22386 11.3439 6 11.62 6H12.38C12.6561 6 12.88 6.22386 12.88 6.5Z" fill="currentColor"/>
                        </svg>
                      </div>
                    </div>
                    <div class="text-size-small text-weight-normal">{post.readTime}</div>
                  </div>
                </div>
                <div class="margin-top margin-xsmall">
                  <div class="text-size-small text-weight-normal text-color-secondary">
                    {post.author} &bull; {post.role}
                  </div>
                </div>
              </div>
            </div>
            <div class="max-width-large">
              <div class="margin-bottom margin-large">
                <div class="text-size-regular text-weight-normal text-color-secondary">
                  {post.summary}
                </div>
              </div>
              <div class="w-richtext">
                {post.sections.map((section) => (
                  <div>
                    <h2>{section.heading}</h2>
                    {section.body.map((paragraph) => (
                      <p>{paragraph}</p>
                    ))}
                    {section.list && (
                      <ul role="list">
                        {section.list.map((item) => (
                          <li>{item}</li>
                        ))}
                      </ul>
                    )}
                    {section.code && (
                      <pre><code>{section.code}</code></pre>
                    )}
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="padding-right-grid"></div>
    </div>
  </section>
</WebflowLayout>
